name: Disparador del Ojeador de Duendes

on:
  schedule:
    # Ejecuta el workflow cada 15 minutos
    - cron: '*/15 * * * *'
  workflow_dispatch: # Permite ejecutarlo manualmente desde GitHub

jobs:
  trigger-scout:
    runs-on: ubuntu-latest
    steps:
      - name: Llamar al endpoint del orquestador
        run: |
          # Usamos --fail para que el workflow falle si la API devuelve un error (4xx o 5xx)
          curl --fail -X GET "https://duende-ojeador-worker.vercel.app/api/orchestrator"